---
import BaseLayout from './BaseLayout.astro';
import '../styles/homepage.css';

interface Props {
  title: string;
  description?: string;
  frontmatter?: {
    title?: string;
    description?: string;
  };
}

const { title: propTitle, description: propDescription, frontmatter } = Astro.props;
const title = frontmatter?.title || propTitle || 'Open Ticket AI';
const description = frontmatter?.description || propDescription;

const sidebarSections = [
  {
    label: 'Products',
    items: [
      { label: 'Overview', link: '/products/overview/' },
      { label: 'Prediction API', link: '/products/prediction-api/overview/' },
      { label: 'Synthetic Data', link: '/products/synthetic-data/synthetic-data-generation/' },
    ]
  },
  {
    label: 'Guides',
    items: [
      { label: 'Quick Start', link: '/guides/quick_start/' },
      { label: 'First Pipeline', link: '/guides/first_pipeline/' },
      { label: 'Plan Ticket Automation', link: '/guides/plan-ticket-automation-project/' },
    ]
  },
  {
    label: 'Users',
    items: [
      { label: 'Installation', link: '/users/installation/' },
      { label: 'Plugin Marketplace', link: '/users/plugin-marketplace/' },
      { label: 'Configuration Examples', link: '/users/config_examples/' },
      { label: 'OTOBO/Znuny Setup', link: '/users/plugin-otobo-znuny/setup/' },
    ]
  },
  {
    label: 'Developers',
    items: [
      { label: 'Dependency Injection', link: '/developers/dependency_injection/' },
      { label: 'Services', link: '/developers/services/' },
      { label: 'Pipeline Code', link: '/developers/pipeline_code/' },
      { label: 'Config Rendering', link: '/developers/config_rendering/' },
      { label: 'Template Rendering', link: '/developers/template_rendering/' },
      { label: 'Testing', link: '/developers/testing/' },
      { label: 'Logging', link: '/developers/logging/' },
      { label: 'Ticket System Integration', link: '/developers/ticket_system_integration/' },
    ]
  },
  {
    label: 'Details',
    items: [
      { label: 'Config Reference', link: '/details/config_reference/' },
      { label: 'Template Rendering', link: '/details/template_rendering/' },
    ]
  },
  {
    label: 'Blog',
    items: [
      { label: 'Open Ticket AI 1.4 Release', link: '/blog/open-ticket-ai-1-4-release/' },
      { label: 'AI in Ticket Systems', link: '/blog/ai-in-ticketsystems/' },
      { label: 'Automatic Ticket Labeling', link: '/blog/automatic_ticket_labeling/' },
    ]
  },
];
---

<BaseLayout title={title} description={description}>
  <div class="flex min-h-screen flex-col">
    <div class="flex flex-1">
      <aside class="w-[280px] bg-[#1a1a1a] text-white fixed h-screen overflow-y-auto border-r border-[#333] md:block hidden">
        <div class="p-8 px-6">
          <a href="/" class="block text-2xl font-bold text-[#7c4dff] no-underline mb-8">Open Ticket AI</a>
          <nav>
            {sidebarSections.map(section => (
              <div class="mb-8">
                <h3 class="text-sm uppercase tracking-wider text-gray-500 mb-2">{section.label}</h3>
                <ul class="list-none p-0 m-0">
                  {section.items.map(item => (
                    <li class="mb-1">
                      <a href={item.link} class="block py-2 px-3 text-gray-400 no-underline rounded transition-all hover:bg-[#333] hover:text-white">{item.label}</a>
                    </li>
                  ))}
                </ul>
              </div>
            ))}
          </nav>
        </div>
      </aside>
      <main class="ml-[280px] flex-1 p-8 px-16 max-w-[1200px] md:ml-[280px] md:p-8 md:px-16 max-md:ml-0 max-md:p-4">
        <article class="bg-white p-8 rounded-lg">
          <slot />
        </article>
      </main>
    </div>
  </div>
</BaseLayout>
