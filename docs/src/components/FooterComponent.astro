---
import { Icon } from 'astro-icon/components';

type FooterLink = {
  label: string;
  url: string;
};

type FooterSection = {
  title: string;
  links: FooterLink[];
};

type SocialLink = {
  platform: string;
  url: string;
  ariaLabel: string;
  iconName: string;
};

type FooterData = {
  brandName?: string;
  brandTagline?: string;
  socialHeading?: string;
  sections: FooterSection[];
  social: SocialLink[];
  legal?: FooterLink[];
  copyright: string;
};

interface Props {
  footerData?: FooterData;
}

const { footerData } = Astro.props;

const sections = footerData?.sections || [];
const social = footerData?.social || [];
const copyright = footerData?.copyright || 'Open Ticket AI UG. All rights reserved.';
const brandName = footerData?.brandName || 'Open Ticket AI';
const brandTagline =
  footerData?.brandTagline ||
  'Intelligent automation for OTRS, Znuny, and Zammad. German Engineering.';
const socialHeading = footerData?.socialHeading || 'Connect';
const year = new Date().getFullYear();
---

<footer class="border-t border-white/5 bg-background-dark py-24">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="mb-16 grid grid-cols-1 gap-12 md:grid-cols-4">
      <div class="md:col-span-1">
        <div class="mb-6 flex items-center gap-3">
          <img
            src="/images/open-ticket-ai-logo.png"
            alt="Company logo"
            class="size-10 object-contain"
          />
          <span
            class="font-display bg-gradient-to-r from-primary to-cyan-400 bg-clip-text text-lg font-bold tracking-tight text-transparent"
          >
            {brandName}
          </span>
        </div>
        <p class="max-w-xs text-sm leading-relaxed text-slate-500">
          {brandTagline}
        </p>
      </div>

      {
        sections.map(section => (
          <div>
            <h4 class="mb-6 text-sm font-bold uppercase tracking-widest text-white">
              {section.title}
            </h4>
            <ul class="space-y-4 text-sm text-slate-500">
              {section.links.map(link => (
                <li>
                  <a
                    href={link.url}
                    class="text-primary transition-colors hover:text-primary-light"
                  >
                    {link.label}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        ))
      }

      {
        social.length > 0 && (
          <div>
            <h4 class="mb-6 text-sm font-bold uppercase tracking-widest text-white">
              {socialHeading}
            </h4>
            <div class="flex gap-4 text-primary">
              {social.map(socialLink => (
                <a
                  href={socialLink.url}
                  aria-label={socialLink.ariaLabel}
                  class="transition-colors hover:text-primary-light"
                >
                  <Icon name={socialLink.iconName} class="h-6 w-6" />
                </a>
              ))}
            </div>
          </div>
        )
      }
    </div>

    <div
      class="flex flex-col items-center justify-between gap-6 border-t border-white/5 pt-8 md:flex-row"
    >
      <div class="text-xs text-slate-600">Â© {year} {copyright}</div>
    </div>
  </div>
</footer>
