---
import DocsLayout from '../../layouts/DocsLayout.astro';
import { getEntry } from 'astro:content';

const slugParam = Astro.params.slug;
const slugSegments = Array.isArray(slugParam) ? slugParam : [slugParam].filter(Boolean);
const entryId = ['open-ticket-automation', 'guides', ...slugSegments].join('/');
const entry = slugSegments.length ? await getEntry('docs', entryId) : null;

if (!entry) {
  throw Astro.redirect('/404');
}

const { Content } = await entry.render();
const title = entry.data.title;
const description = entry.data.description;
---
<DocsLayout title={title} description={description} frontmatter={{ title, description }}>
  <Content />
</DocsLayout>

