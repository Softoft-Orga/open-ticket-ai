---
import DocsLayout from '../../layouts/DocsLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const docs = await getCollection('docs');
  const productDocs = docs.filter(doc => doc.id.startsWith('open-ticket-automation/products/'));
  
  return productDocs.map(doc => {
    const parts = doc.id.split('/');
    const slug = parts.slice(2);
    
    return {
      params: { slug: slug.join('/') },
      props: { entry: doc },
    };
  });
}

const { entry } = Astro.props;

const { Content } = await entry.render();
const title = entry.data.title;
const description = entry.data.description;
---
<DocsLayout title={title} description={description} frontmatter={{ title, description }}>
  <Content />
</DocsLayout>

