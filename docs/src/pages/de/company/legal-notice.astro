---
import { getCollection } from 'astro:content';
import BaseLayout from '../../../layouts/BaseLayout.astro';
import Card from '../../../components/vue/core/basic/Card.vue';

const title = 'Legal Notice - Open Ticket AI';
const description = 'Legal information and company details for Open Ticket AI';

const currentLocale = Astro.currentLocale.toLowerCase();
const allSiteConfigs = await getCollection('site');
const siteConfig = allSiteConfigs.find(entry =>
  entry.id.toLowerCase().startsWith(`${currentLocale}/`)
);

const legalInfo = siteConfig?.data.legalInfo;

if (!legalInfo) {
  throw new Error('Legal information not found in site configuration');
}
---

<BaseLayout title={title} description={description}>
  <div class="min-h-screen bg-background-dark pb-32">
    <section class="relative pb-20 pt-24">
      <div class="mx-auto max-w-4xl px-6">
        <h1
          class="mb-8 text-5xl font-black leading-tight tracking-tight text-white sm:text-6xl lg:text-7xl"
        >
          Impressum
        </h1>
        <p class="text-lg text-slate-400">
          Information gemäß § 5 TMG (Telemediengesetz)
        </p>
      </div>
    </section>

    <section class="mx-auto max-w-4xl px-6">
      <Card variant="surface" tone="neutral" size="lg" radius="2xl" client:load>
        <div class="space-y-8">
          <div>
            <h2 class="mb-3 text-sm font-bold uppercase tracking-widest text-slate-500">
              Firmenname
            </h2>
            <p class="text-xl font-semibold text-white">{legalInfo.companyName}</p>
          </div>

          <div>
            <h2 class="mb-3 text-sm font-bold uppercase tracking-widest text-slate-500">
              Rechtsform
            </h2>
            <p class="text-lg text-slate-300">{legalInfo.legalForm}</p>
          </div>

          <div>
            <h2 class="mb-3 text-sm font-bold uppercase tracking-widest text-slate-500">
              Geschäftsführer
            </h2>
            <p class="text-lg text-slate-300">{legalInfo.ceo}</p>
          </div>

          <div>
            <h2 class="mb-3 text-sm font-bold uppercase tracking-widest text-slate-500">
              Sitz
            </h2>
            <p class="text-lg text-slate-300">
              {legalInfo.address.street}<br />
              {legalInfo.address.zip}
              {legalInfo.address.city}<br />
              {legalInfo.address.country}
            </p>
          </div>

          <div>
            <h2 class="mb-3 text-sm font-bold uppercase tracking-widest text-slate-500">
              Handelsregister
            </h2>
            <p class="text-lg text-slate-300">{legalInfo.registerInfo}</p>
          </div>

          <div>
            <h2 class="mb-3 text-sm font-bold uppercase tracking-widest text-slate-500">
              Umsatzsteuer-Identifikationsnummer
            </h2>
            <p class="text-lg text-slate-300">{legalInfo.vatId}</p>
          </div>

          <div>
            <h2 class="mb-3 text-sm font-bold uppercase tracking-widest text-slate-500">
              Kontaktinformationen
            </h2>
            <p class="text-lg text-slate-300">
              E‑Mail: <a href={`mailto:${legalInfo.email}`} class="text-primary hover:underline"
                >{legalInfo.email}</a
              ><br />
              Telefon: <a href={`tel:${legalInfo.phone}`} class="text-primary hover:underline"
                >{legalInfo.phone}</a
              >
            </p>
          </div>

          <div class="border-t border-slate-700 pt-8">
            <h2 class="mb-4 text-xl font-bold text-white">
              Verantwortlich für den Inhalt (gemäß § 55 Abs. 2 RStV)
            </h2>
            <p class="text-lg text-slate-300">
              {legalInfo.ceo}<br />
              {legalInfo.address.street}<br />
              {legalInfo.address.zip}
              {legalInfo.address.city}<br />
              {legalInfo.address.country}
            </p>
          </div>

          <div class="border-t border-slate-700 pt-8">
            <h2 class="mb-4 text-xl font-bold text-white">Haftungsausschluss</h2>
            <div class="space-y-4 text-slate-400">
              <div>
                <h3 class="mb-2 font-semibold text-slate-300">Haftung für Inhalte</h3>
                <p class="text-sm leading-relaxed">
                  Die Inhalte unserer Seiten wurden mit größter Sorgfalt erstellt. Dennoch können wir die Richtigkeit, Vollständigkeit und Aktualität der Inhalte nicht garantieren. Als Diensteanbieter sind wir gemäß der allgemeinen Gesetzgebung nach § 7 Abs. 1 TMG für unsere eigenen Inhalte auf diesen Seiten verantwortlich. Nach §§ 8 bis 10 TMG sind wir nicht verpflichtet, übermittelte oder gespeicherte fremde Informationen zu überwachen oder Umstände zu untersuchen, die auf eine rechtswidrige Tätigkeit hinweisen. Verpflichtungen zur Entfernung oder Sperrung von Informationen nach allgemeinem Recht bleiben unberührt.
                </p>
              </div>

              <div>
                <h3 class="mb-2 font-semibold text-slate-300">Haftung für Links</h3>
                <p class="text-sm leading-relaxed">
                  Unser Angebot enthält Links zu externen Websites Dritter, auf deren Inhalte wir keinen Einfluss haben. Daher können wir für diese externen Inhalte keine Haftung übernehmen. Der jeweilige Anbieter oder Betreiber der Seiten ist stets für den Inhalt der verlinkten Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf mögliche Rechtsverstöße geprüft. Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nicht erkennbar.
                </p>
              </div>

              <div>
                <h3 class="mb-2 font-semibold text-slate-300">Urheberrecht</h3>
                <p class="text-sm leading-relaxed">
                  Die von den Seitenbetreibern auf diesen Seiten erstellten Inhalte und Werke unterliegen dem deutschen Urheberrecht. Vervielfältigung, Bearbeitung, Verbreitung oder jede Form der Verwertung solcher Materialien über den Rahmen des Urheberrechts hinaus bedürfen der vorherigen schriftlichen Zustimmung des jeweiligen Urhebers bzw. Erstellers. Das Herunterladen und Kopieren dieser Seite ist nur für den privaten, nicht‑kommerziellen Gebrauch gestattet.
                </p>
              </div>
            </div>
          </div>
        </div>
      </Card>
    </section>
  </div>
</BaseLayout>