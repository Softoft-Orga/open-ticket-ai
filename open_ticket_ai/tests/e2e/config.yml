$schema: "./config.schema.json"

open_ticket_ai:

    # only one ticket-system adapter
    system:
        id: "otobo_ticket_system_adapter"
        provider_key: "OTOBOAdapter"
        params:
            server_address: "http://18.193.56.84"
            webservice_name: "OTAI"
            search_operation_url: "ticket/search"
            update_operation_url: "ticket"
            get_operation_url: "ticket/get"
            username: "root@localhost"
            password_env_var: "OTOBOPASS"

    pipes:
        -   id: "basic_ticket_fetcher"
            provider_key: "BasicTicketFetcher"
            filter_by_queue: "Raw"

        -   id: "subject_body_preparer"
            provider_key: "SubjectBodyPreparer"

        -   id: "queue_ai_inference"
            provider_key: "HFLocalAIInferenceService"
            hf_model: "open-ticket-ai/queue-classification-german-bert"
            hf_token_env_var: "HUGGINGFACE_TOKEN"

        -   id: "queue_updater"
            provider_key: "BasicTicketModifier"
            confidence_threshold: 0.8
            low_confidence_queue: Junk
            ticket_system_value2model_values:
                Raw: Raw
                Billing: Billing
                Technical: Technical

    pipelines:
        -   id: "queue_classification"
            schedule:
                interval: "30"
                unit: seconds
            pipes:
                - "basic_ticket_fetcher"
                - "subject_body_preparer"
                - "queue_ai_inference"
                - "queue_updater"
