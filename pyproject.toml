[tool.uv.workspace]
members = [
    "src/open_ticket_ai",
    "src/open_ticket_ai_hf_local",
    "src/open_ticket_ai_otobo_znuny_plugin",
]

[tool.uv.sources]
open-ticket-ai = { workspace = true }
open-ticket-ai-hf-local = { workspace = true }
open-ticket-ai-otobo-znuny-plugin = { workspace = true }

[tool.ruff]
line-length = 120

[tool.ruff.lint]
select = ["E", "F", "I", "UP", "B", "SIM", "PL", "PERF", "TRY"]
ignore = ["TRY003"]
fixable = ["ALL"]

[tool.ruff.lint.per-file-ignores]
"tests/**/*.py" = ["PLR2004"]

[tool.mypy]
python_version = "3.13"
strict = true
plugins = ['pydantic.mypy']
namespace_packages = true
explicit_package_bases = true
mypy_path = "src"

[[tool.mypy.overrides]]
module = ["tests.*", "python_extras.*"]
ignore_errors = true

[tool.pytest.ini_options]
pythonpath = [".", "src"]
testpaths = ["tests", "src/open_ticket_ai_hf_local", "src/open_ticket_ai_otobo_znuny_plugin"]
addopts = "-q"
asyncio_mode = "auto"
asyncio_default_fixture_loop_scope = "function"
markers = [
    "unit: schnelle, isolierte Tests",
    "integration: core + plugin zusammen",
    "contract: plugin-api-vertrag",
    "e2e: end-to-end flows",
    "slow: dauert l√§nger"
]
